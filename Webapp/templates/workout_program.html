<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Program</title>
</head>
<body>
    <h1>Workout Program</h1>
    {% if role == "trainer" %}
        <h2>Create New Workout Program</h2>
        <!-- Form to create a new workout program -->
        <form id="createWorkoutForm" action="{{ url_for('create_workout') }}" method="post">
            <label for="name">Name:</label><br>
            <input type="text" id="name" name="name"><br>
            <label for="description">Description:</label><br>
            <textarea id="description" name="description"></textarea><br>
            <label for="difficulty">Difficulty:</label><br>
            <input type="text" id="difficulty" name="difficulty"><br>
            <!-- Add button to add exercises -->
            <button type="button" onclick="addExerciseToWorkout()">Add Exercise to Workout</button>
            <!-- Add button to select another exercise -->
            <button type="button" onclick="showExerciseForm()">Select Another Exercise</button>
            <!-- Hidden div for exercise form -->
            <div id="exerciseForm" style="display: none;">
                <label for="exercise">Select Exercise:</label>
                <select id="exercise" name="exercise_ids" onchange="fetchExerciseDetails()"> <!-- Add onchange event -->
                    <option value="">Select Exercise</option>
                    {% for exercise in exercises %}
                        <option value="{{ exercise.e_id }}">{{ exercise.name }}</option>
                    {% endfor %}
                </select><br>
                
                <label for="sets">Sets:</label>
                <input type="text" id="sets" name="sets"><br>
                <label for="reps">Reps:</label>
                <input type="text" id="reps" name="reps"><br>
                <!-- Additional information about the selected exercise will be displayed here -->
                <div id="exerciseDetails"></div>
            </div><br>
            <input type="submit" value="Create">
        </form>
    {% endif %}
    <script>
        function showExerciseForm() {
            var exerciseForm = document.getElementById("exerciseForm");
            exerciseForm.style.display = "block";
        }
        function fetchExerciseDetails() {
        var exerciseId = document.getElementById("exercise").value;
        fetch("/exercise_details/" + exerciseId)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                console.log("Exercise details:", data);  // Debugging statement
                var exerciseDetails = "<p>Name: " + data.name + "</p>";
                exerciseDetails += "<p>Description: " + data.description + "</p>";
                exerciseDetails += "<p>Muscle Group: " + data.muscle_group.join(", ") + "</p>";
                exerciseDetails += "<p>Equipment: " + data.equipment + "</p>";
                exerciseDetails += "<p>Sets: " + data.sets + "</p>";
                exerciseDetails += "<p>Reps: " + data.reps + "</p>";
                document.getElementById("exerciseDetails").innerHTML = exerciseDetails;
            })
            .catch(error => console.error('Error fetching exercise details:', error));
    }

    function addExerciseToWorkout() {
        var exerciseId = document.getElementById("exercise").value;
        var sets = document.getElementById("sets").value;
        var reps = document.getElementById("reps").value;
        // Add logic to add exercise to workout program (you need to implement this)
        console.log("Exercise added to workout:", exerciseId, "Sets:", sets, "Reps:", reps);
    }
    </script>    
</body>
</html>
